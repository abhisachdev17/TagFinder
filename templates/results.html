{% extends "base.html" %}

{% block content %}
<h1 class="title">
  Software Engineering Assignment
</h1>

{% for questions in all_questions %}
  <h2 class="subtitle">
    {{ questions['title'] }}
  </h2>
  <div class='list'> 
    {% for post in questions['list'] %}
    <ul> 
        <div class='list-item'> 
            <li> 
              <button type="button" class="collapsible"> <b>Title:</b> {{ post['title'] }} <b>Created:</b> {{ post['creation_date'] }} <b>Votes:</b> {{ post['score'] }} </button>
              <div class="content"> Comments:
                {% for comment in post['comments'] %}
                  {{ comment['body'] }}
                {% endfor %}
                {% for answer in post['answers'] %}
                  <button type="button" class="collapsible is-answer"> {{ answer['body'] }} </button>
                  <div class="content"> Comments:
                    {% for comment in answer['comments'] %}
                      {{ comment['body'] }}
                    {% endfor %}
                  </div>
                {% endfor %}  
              </div>
            </li> 
        </div> 
    </ul>
    {% endfor %}
  </div>
{% endfor %}

<script>
  var coll = document.getElementsByClassName("collapsible");
  var i;
  
  for (i = 0; i < coll.length; i++) {
    coll[i].addEventListener("click", function() {
      this.classList.toggle("active");
      var content = this.nextElementSibling;
      if (content.style.display === "block") {
        content.style.display = "none";
      } else {
        content.style.display = "block";
      }
    });
  }
  </script>

{% endblock %}